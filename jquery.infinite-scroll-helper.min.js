!function(a,b){"use strict";function c(b,c,d){a.isFunction(b[c])&&b[c].apply(b,d)}var d="infiniteScrollHelper",e="plugin_"+d,f={bottomBuffer:0,doneLoading:null,interval:300,loadingClass:"loading",loadMore:a.noop},g=function(c,d){this.element=a(c),this.options=a.extend({},f,d),this.win=a(b),this.loading=!1,this.doneLoadingInt=null,this.pageCount=1,this._init()};g.prototype._init=function(){this._addListeners()},g.prototype._addListeners=function(){this.win.on("scroll."+d,a.proxy(this._handleScroll,this))},g.prototype._handleScroll=function(){var a=this;this._shouldTriggerLoad()&&(this.beginLoadMore(),this.options.doneLoading&&(this.doneLoadingInt=setInterval(function(){a.options.doneLoading(a.pageCount)&&a.endLoadMore()},this.options.interval)))},g.prototype._shouldTriggerLoad=function(){var a=this.element.offset(),b=this.element.height()+a.top,c=this.win.scrollTop()+this.win.height()+this.options.bottomBuffer;return!this.loading&&c>=b&&this.element.is(":visible")},g.prototype.beginLoadMore=function(){this.pageCount++,this.options.loadMore(this.pageCount,a.proxy(this.endLoadMore,this)),this.loading=!0,this.element.addClass(this.options.loadingClass)},g.prototype.endLoadMore=function(){clearInterval(this.doneLoadingInt),this.loading=!1,this.element.removeClass(this.options.loadingClass)},g.prototype.destroy=function(){this.win.off("scroll."+d),this.options.loadMore=null,this.options.doneLoading=null,a.data(this.element[0],e,null),clearInterval(this.doneLoadingInt)},a.fn[d]=function(b){var d=!1,f=arguments;return"string"==typeof b&&(d=b),this.each(function(){var h=a.data(this,e);h?d&&c(h,d,Array.prototype.slice.call(f,1)):a.data(this,e,new g(this,b))})}}(jQuery,window);