(function(e,t){var n="infiniteScrollHelper",r={bottomBuffer:0,loadingClass:"loading",loadMore:e.noop,doneLoading:e.noop},i=function(n,i){this.element=e(n),this.options=e.extend({},r,i),this.win=e(t),this.defaults=r,this.loading=!1,this.doneLoadingInt=null,this.pageCount=1,this._init()};i.prototype._init=function(){this._addListeners()},i.prototype._addListeners=function(){var t=this;this.win.on("scroll."+n,e.proxy(function(e){var n=this.element.offset();this.win.scrollTop()+this.win.height()+this.options.bottomBuffer>=this.element.height()+n.top&&(t.loading||(t.pageCount++,t.options.loadMore(t.pageCount),t.loading=!0,t.element.addClass(t.defaults.loadingClass),t.doneLoadingInt=setInterval(function(){t.options.doneLoading()&&(clearInterval(t.doneLoadingInt),t.loading=!1,t.element.removeClass(t.defaults.loadingClass))},300)))},this))},i.prototype.destroy=function(){this.win.off("scroll."+n),this.options.loadMore=null,this.options.doneLoading=null,clearInterval(this.doneLoadingInt),this.element.data("plugin_"+n,null)},e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new i(this,t))})}})(jQuery,window);