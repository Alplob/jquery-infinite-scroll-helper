!function(a,b){"use strict";function c(b,c,d){a.isFunction(b[c])&&b[c].apply(b,d)}function d(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function e(c,d){this.options=a.extend({},h,d),this.$element=a(c),this.$loadingClassTarget=this.options.loadingClassTarget?a(this.options.loadingClassTarget):this.$element,this.$scrollContainer=this._getScrollContainer(),this.$win=a(b),this.loading=!1,this.doneLoadingInt=null,this.pageCount=1,this._init()}var f="infiniteScrollHelper",g="plugin_"+f,h={bottomBuffer:0,debounceInt:100,doneLoading:null,interval:300,loadingClass:"loading",loadingClassTarget:null,loadMore:a.noop};e.prototype._init=function(){this._addListeners()},e.prototype._getScrollContainer=function(){var c=null;return"scroll"==this.$element.css("overflow-y")&&(c=this.$element),c||(c=this.$element.parents().filter(function(){return"scroll"==a(this).css("overflow-y")})),c=c.length>0?c:a(b)},e.prototype._addListeners=function(){var a=this;this.$scrollContainer.on("scroll."+f,d(function(){a._handleScroll()},this.options.debounceInt))},e.prototype._handleScroll=function(){var a=this;console.log("handlescroll"),this._shouldTriggerLoad()&&(this._beginLoadMore(),this.options.doneLoading&&(this.doneLoadingInt=setInterval(function(){a.options.doneLoading(a.pageCount)&&a._endLoadMore()},this.options.interval)))},e.prototype._shouldTriggerLoad=function(){var a=this.$element.height(),b=this.$scrollContainer.scrollTop()+this.$scrollContainer.height()+this.options.bottomBuffer;return console.log(a+" : "+b),!this.loading&&b>=a&&this.$element.is(":visible")},e.prototype._beginLoadMore=function(){this.pageCount++,this.options.loadMore(this.pageCount,a.proxy(this._endLoadMore,this)),this.loading=!0,this.$loadingClassTarget.addClass(this.options.loadingClass)},e.prototype._endLoadMore=function(){clearInterval(this.doneLoadingInt),this.loading=!1,this.$loadingClassTarget.removeClass(this.options.loadingClass)},e.prototype.destroy=function(){this.$scrollContainer.off("scroll."+f),this.options.loadMore=null,this.options.doneLoading=null,a.data(this.$element[0],g,null),clearInterval(this.doneLoadingInt)},a.fn[f]=function(b){var d=!1,f=arguments;return"string"==typeof b&&(d=b),this.each(function(){var h=a.data(this,g);h?d&&c(h,d,Array.prototype.slice.call(f,1)):a.data(this,g,new e(this,b))})}}(jQuery,window);