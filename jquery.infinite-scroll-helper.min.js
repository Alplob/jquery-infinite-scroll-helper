(function(a,b){function f(b,c,d){a.isFunction(b[c])&&b[c].apply(b,d)}function g(c,d){this.element=a(c),this.options=a.extend({},e,d),this.win=a(b),this.loading=!1,this.doneLoadingInt=null,this.pageCount=1,this._init()}"use strict";var c="infiniteScrollHelper",d="plugin_"+c,e={bottomBuffer:0,doneLoading:a.noop,interval:300,loadingClass:"loading",loadMore:a.noop};g.prototype._init=function(){this._addListeners()},g.prototype._addListeners=function(){var a=this;a.win.on("scroll."+c,function(b){a._shouldTriggerLoad()&&(a.pageCount++,a.options.loadMore(a.pageCount),a.loading=!0,a.element.addClass(a.options.loadingClass),a.doneLoadingInt=setInterval(function(){a.options.doneLoading(a.pageCount)&&(clearInterval(a.doneLoadingInt),a.loading=!1,a.element.removeClass(a.options.loadingClass))},a.options.interval))})},g.prototype._shouldTriggerLoad=function(){var a=this.element.offset(),b=this.element.height()+a.top,c=this.win.scrollTop()+this.win.height()+this.options.bottomBuffer;return!this.loading&&c>=b},g.prototype.destroy=function(){this.win.off("scroll."+c),this.options.loadMore=null,this.options.doneLoading=null,a.data(this.element[0],d,null),clearInterval(this.doneLoadingInt)},a.fn[c]=function(b){var c=!1,e=arguments;return typeof b=="string"&&(c=b),this.each(function(){var h=a.data(this,d);h?c&&f(h,c,Array.prototype.slice.call(e,1)):a.data(this,d,new g(this,b))})}})(jQuery,window)